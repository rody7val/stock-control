extends ./layout.jade

block js
	script(src='/js/lodash.min.js', type="text/javascript")
	script(src='/js/angular-1.1.5.min.js', type="text/javascript")
	script(src='/js/item/index.js', type="text/javascript")

block css
	link(href='/css/item/index.css', rel="stylesheet", type="text/css")

block content
	.head-title
		h1.text-center.light Stock actual
	div(ng-app='stock-control')
		div(ng-controller="StockController")
			#stock
				.container
					.row
						br
						br
						.jumbotron.text-center
							.container
								.col-md-4
									h3.light Unidades en stock
									h3 #[span.tag.tag-default {{stock.getStockTotal()}} u]
								.col-md-4
									h3.light Costo total
									h3 #[span.tag.tag-danger $ {{stock.priceFixed(stock.getCostTotal())}}]
								.col-md-4
									h3.light Valor de venta total
									h3 #[span.tag.tag-success $ {{stock.priceFixed(stock.getSaleTotal())}}]
					.row
						.col-md-12
							nav#find-bar.navbar.navbar-light.bg-faded
								.col-md-7
									form(action='/item/find',method='get')
											//- input search
											input.form-control.form-control-lg(
          							autofocus
												type='search'
												placeholder='Filtrar por nombre'
												ng-model='itemSearch' 
											)
					.row
						.col-md-12
							table.table.table-hover
								thead.thead-inverse
									tr
										th: h4.light Items
										th: h4.light Stock
										th: h4.light $/u
										th: h4.light Código
										th: h4.light Acciones
								tbody
									//-  | startFrom:currentPage*pageSize | limitTo:pageSize
									tr(
										ng-repeat="item in stock.items | filter:itemSearch | orderBy: 'name'"
									)
										//- Items
										td: a.btn.btn-link.btn-sm(href='/item/{{item._id}}') {{item.name}}
										//- Stock
										td(class="{{item.qty === 0 ? 'alert-danger' : 'alert-success'}}") {{item.qty}}
										//- $/u
										td {{item.price}}
										//- Código
										td {{item.code}}
										//- Acciones
										td
											a.left.btn.btn-outline-warning.btn-sm(href='/item/{{item._id}}/edit') Editar
							//- pagination:
							//- button(
							//- 	ng-disabled='currentPage == 0'
							//- 	ng-click='currentPage = currentPage-1'
							//- ) Previos
							//- {{currentPge+1}}/{{numberOfPages()}}
							//- button(
							//- 	ng-disabled='currentPage >= stock.items.length/pageSize-1'
							//- 	ng-click='currentPage = currentPage+1'
							//- ) Siguientes